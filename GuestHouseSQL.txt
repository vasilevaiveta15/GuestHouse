CREATE TABLE USERS
(
    USER_ID  NUMBER GENERATED ALWAYS AS IDENTITY (START with 1 INCREMENT by 1) NOT NULL PRIMARY KEY,
    USERNAME VARCHAR(50)                                                       NOT NULL UNIQUE,
    PASSWORD VARCHAR(250)                                                      NOT NULL,
    ROLE     VARCHAR(50)
);

CREATE TABLE GUEST_HOUSES
(
    GUEST_HOUSE_ID     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME_OF_HOUSE      VARCHAR(50),
    KM_TO_THE_CAPITAL  DOUBLE PRECISION,
    NEAREST_CITY       VARCHAR(50),
    QUADRATURE         DOUBLE PRECISION,
    NUM_OF_FLOORS      NUMBER,
    NUM_OF_RENTED_DAYS NUMBER,
    PAYMENT_PER_DAY    DOUBLE PRECISION,
    OWNER_ID           NUMBER,
    RENTER_ID          NUMBER
);

CREATE TABLE INDIVIDUALS
(
    INDIVIDUAL_ID NUMBER GENERATED ALWAYS AS IDENTITY (START with 1 INCREMENT by 1) NOT NULL PRIMARY KEY,
    FIRST_NAME    VARCHAR(50),
    MIDDLE_NAME   VARCHAR(50),
    LAST_NAME     VARCHAR(50),
    CARD_NUMBER   VARCHAR(50) UNIQUE,
    BIRTH_DATE    DATE,
    PHONE_NUMBER  VARCHAR(50),
    EMAIL         VARCHAR(50),
    IS_ACTIVE     NUMBER(1, 0),
    USER_ID       NUMBER UNIQUE
);

CREATE TABLE ADDRESSES
(
    ADDRESS_ID    NUMBER GENERATED ALWAYS AS IDENTITY (START with 1 INCREMENT by 1) NOT NULL PRIMARY KEY,
    COUNTRY       VARCHAR(50),
    CITY          VARCHAR(50),
    DISTRICT      VARCHAR(50),
    INDIVIDUAL_ID NUMBER
);

ALTER TABLE GUEST_HOUSES
    ADD CONSTRAINT FK_USERS_GUEST_HOUSES
        FOREIGN KEY (OWNER_ID)
            REFERENCES USERS (USER_ID);

ALTER TABLE INDIVIDUALS
    ADD CONSTRAINT FK_USERS_INDIVIDUALS
        FOREIGN KEY (USER_ID)
            REFERENCES USERS (USER_ID);

ALTER TABLE ADDRESSES
    ADD CONSTRAINT FK_INDIVIDUALS_ADDRESSES
        FOREIGN KEY (INDIVIDUAL_ID)
            REFERENCES INDIVIDUALS (INDIVIDUAL_ID);
